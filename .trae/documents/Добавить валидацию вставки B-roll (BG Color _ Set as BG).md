## Дополнение от тебя
- Перед запуском проверки после вставки B-roll: ждать 2 секунды, чтобы UI успел применить изменения.

## Требования (как будет работать)
- После вставки B-roll выполняется валидация кликом в центр канвы.
- Если после клика появляется кнопка "BG Color" (или "Color") → канва пустая → повторяем вставку B-roll.
- Если появляется кнопка "Set as BG" → B-roll добавлен, но не фон → нажимаем "Set as BG" и проверяем ещё раз.
- Максимум 3 попытки на сцену. После 3 неудач: перейти к следующей сцене и записать ошибку в отчёт.

## Изменения в коде
- Обновить [heygen_automation.py](file:///Users/ilya/Projects/heygen_automation_V2/heygen_automation.py):
  - Добавить хелпер для «проверочного клика» по центру канвы БЕЗ удаления слоёв (в отличие от `prepare_canvas_for_broll`, который нажимает Delete).
  - Добавить `_detect_broll_state_after_canvas_click(...)`:
    - кликает по центру канвы
    - перед проверкой ждёт 2 секунды
    - проверяет видимость:
      - `button` с именем `BG Color|Color|Цвет фона|Цвет`
      - `button/menuitem` с именем `Set as BG|Set as Background|Сделать фоном|Установить как фон`
    - возвращает состояние: `ok | empty_canvas | needs_set_bg`.
  - Обернуть текущую вставку B-roll в цикл `for attempt in 1..3`:
    - попытка вставки (как сейчас: Media → поиск → выбор первого результата)
    - `await asyncio.sleep(2.0)`
    - затем валидация:
      - `needs_set_bg` → кликнуть `Set as BG` → `await asyncio.sleep(2.0)` → повторить проверку
      - `empty_canvas` → считать вставку неуспешной и повторить попытку (перед повтором снова сфокусировать сцену + подготовить канву)
      - `ok` → успех
  - Репортинг: писать в существующий `self.report['broll_errors']` с полями `kind='validation_failed'`, `reason`, `attempt`, `scene_idx`, `query`, `screenshot`.

## Селекторы
- BG Color:
  - `page.get_by_role('button', name=/^(BG\s*Color|Color|Background\s*Color|Цвет\s*фона|Цвет)$/i)`
- Set as BG:
  - `page.get_by_role('button', name=/^(Set as BG|Set as Background|Make background|Сделать фоном|Установить как фон)$/i)`
  - фолбэк: `page.get_by_role('menuitem', name=/.../i)`

## Проверка на нужном шаблоне
- Проверять на URL:
  - https://app.heygen.com/create-v4/draft?template_id=0344d8614d484b16a7ab0531560bae91&private=1
- Воспроизвести сценарий "пустая канва": удалить верхний слой → клик по канве → появляется "BG Color" → вставка B-roll должна ретраиться.
- Воспроизвести сценарий "не фон": после вставки виден "Set as BG" → валидация нажимает кнопку и подтверждает, что она больше не появляется.

## Критерии готовности
- Оба кейса отрабатывают на одной и той же странице.
- После 3 неудач сцена помечается ошибкой и процесс продолжает следующие сцены.
- Есть скриншоты на каждом фейле/ретрае в `debug/screenshots/`.