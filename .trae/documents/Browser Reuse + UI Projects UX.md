## Контекст (факт по коду)
- UI «Проекты к запуску» и удаление проектов реализованы в [RunnerControls.tsx](file:///Users/ilya/Projects/heygen_automation_V2/genmaster-hub-main/src/components/runner/RunnerControls.tsx#L820-L1003): сейчас удаление делается с задержкой 5 секунд и возможностью отмены.
- Бэкенд управляет задачами в [ui/api.py](file:///Users/ilya/Projects/heygen_automation_V2/ui/api.py): глобальный `runner`, задачи запускаются через `_run_one()` и `POST /run/projects`, остановка через `_stop_all_tasks()`.
- Управление Playwright/браузером сейчас в [heygen_automation.py](file:///Users/ilya/Projects/heygen_automation_V2/heygen_automation.py#L1349-L1576) (`open_browser`) и [heygen_automation.py](file:///Users/ilya/Projects/heygen_automation_V2/heygen_automation.py#L2981-L2996) (`close_browser`). `close_browser()` сейчас не делает `playwright.stop()` и не закрывает контекст корректно.

## Цели (требования 1–7)
1) Один браузер и (в типовом последовательном режиме) одна вкладка: после завершения части не открывать новый профиль/браузер; для следующей части просто снова открывать ссылку.
2) Кнопка «Открыть браузер» должна открывать `https://app.heygen.com` (сразу после старта).
3) При Stop и при ручном закрытии окна браузера процессы не должны «висеть»; делаем корректное закрытие Playwright/Chromium и остановку задач.
4) Убрать ожидание 5 секунд при удалении проекта (сейчас «отложенное удаление»).
5) Добавить кнопку «Удалить выбранные» в «Проекты к запуску» (bulk delete).
6) Сделать список «Проекты к запуску» со скроллом внутри блока.
7) Увеличить размер названия эпизода до уровня как у «Спикер».

## План работ (в соответствии с .traerules)
### A) Сначала обновить план (только docs/PLAN.md)
- Добавить новый Active Task: «Browser reuse + UI Projects UX (1–7)».
- Вписать acceptance criteria для пунктов 1–7 (см. ниже), и отметить что текущий пункт про “5 секунд отмены удаления” будет отменён/пересмотрен.
- После этого остановиться и ждать твоего явного «Go» на реализацию.

### B) Backend: стабильный lifecycle браузера (пункты 1–3)
- Исправить `HeyGenAutomation.open_browser()`:
  - Нормализовать понятия: различать Browser vs BrowserContext (сейчас `launch_persistent_context` возвращает BrowserContext, из-за этого повторный `open_browser()` может ошибочно «решить, что браузера нет» и открыть новый профиль).
  - Хранить и переиспользовать: `self.playwright`, `self.playwright_context` (BrowserContext) и `self._page`.
  - Добавить «гарантированный goto» на `https://app.heygen.com/projects` (или `https://app.heygen.com/`) при открытии через UI.
- Исправить `HeyGenAutomation.close_browser()`:
  - Закрывать именно то, что реально запущено: page/context/browser (включая persistent context).
  - Обязательно делать `await self.playwright.stop()` и чистить ссылки, чтобы не оставалось фоновых процессов Playwright.
  - Развести случаи: если подключались через CDP к внешнему браузеру, закрытие может быть «disconnect» (убить внешний Chrome нельзя надёжно). Если браузер запущен Playwright’ом — закрытие должно прибивать процесс.
- В `ui/api._run_one()` обеспечить reuse вкладки:
  - Не создавать “слепо” новый `HeyGenAutomation` без `page`/`context`.
  - Вариант реализации: передавать в дочерний `HeyGenAutomation` общий `page/context`, чтобы все части шли в одной вкладке в последовательном режиме.
- Детект ручного закрытия:
  - Добавить лёгкий watchdog в backend (например, периодическая проверка “есть ли живые pages”): если вкладок нет/контекст закрыт — вызвать `_stop_all_tasks("browser_closed")` и `close_browser()`.

### C) Backend/UI: «Открыть браузер» открывает HeyGen (пункт 2)
- В `POST /browser/open` после `open_browser()` сделать `goto` на дефолтный URL (и логировать отдельным step).
- (Опционально) расширить API: поддержать payload `{ url }`.

### D) Frontend: UX «Проекты к запуску» (пункты 4–7)
- Удаление без ожидания:
  - Удалить `pendingDelete`/таймер/плашку/тост про 5 секунд; оставить confirm-dialog и сразу вызывать DELETE.
- Bulk delete:
  - В header блока «Проекты к запуску» добавить кнопку «Удалить выбранные» (disabled если ничего не выбрано или isRunning).
  - По нажатию — confirm-dialog, затем последовательные DELETE для выбранных эпизодов + обновление списка.
- Скролл внутри блока:
  - Ограничить высоту контейнера списка и включить `overflow-y-auto`, чтобы можно было просмотреть больше проектов без прокрутки всей страницы.
- Размер названия эпизода:
  - Поменять класс у строки `pr.episode` на размер как у «Спикер» (сейчас `text-sm`, у «Спикер» — `text-base font-semibold`).

### E) Проверка (QA)
- Smoke:
  - Нажать «Открыть браузер» → должна открыться `app.heygen.com`.
  - Запустить 2 части подряд → не появляется новый профиль/новое окно; одна вкладка переходит по новым template_url.
  - Нажать Stop → задачи остановлены, браузер закрыт, повторный запуск возможен.
  - Закрыть окно браузера вручную во время работы → задачи останавливаются, backend чисто переходит в stopped.
- UI:
  - Удаление одного проекта — мгновенное.
  - Удаление выбранных — удаляет все отмеченные.
  - Список проектов скроллится внутри блока.
  - Название эпизода визуально совпадает по размеру со «Спикер».

## Acceptance Criteria (коротко)
- AC1: Повторный `open_browser()` не открывает новый профиль при живом браузере.
- AC2: «Открыть браузер» приводит на `app.heygen.com`.
- AC3: Stop закрывает Playwright/браузер так, что не остаётся «висящих» процессов (для управляемого Playwright браузера).
- AC4: Ручное закрытие окна браузера приводит к остановке задач и очистке ресурсов.
- AC5: Удаление проекта без 5-секундной задержки.
- AC6: Есть кнопка удаления выбранных проектов.
- AC7: Блок «Проекты к запуску» имеет внутренний скролл; размер названия эпизода как у «Спикер».

Если план ок — следующим шагом я сначала обновлю docs/PLAN.md (как требуют .traerules), остановлюсь и буду ждать «Go» на реализацию.